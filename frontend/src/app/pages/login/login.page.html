<ion-content class="login-page">
  <div class="login-container">
    <div class="login-header">
      <div class="utzac-branding">
        <ion-icon name="school-outline" class="logo-icon"></ion-icon>
        <div class="branding-text">
          <h1>UTZAC</h1>
          <p>Sistema de Gestión de Aspirantes</p>
        </div>
      </div>
    </div>

    <div class="login-form-container">
      <form [formGroup]="loginForm" (ngSubmit)="onLogin()" class="login-form">
        <h2>Iniciar Sesión</h2>
        <p class="subtitle">Accede al sistema de gestión</p>

        <ion-item class="login-item">
          <ion-label position="stacked">Correo Electrónico</ion-label>
          <ion-input 
            type="email"
            formControlName="email" 
            placeholder="usuario@utzac.edu.mx"
            [class.error]="isFieldInvalid('email')">
            <ion-icon name="mail-outline" slot="start"></ion-icon>
          </ion-input>
        </ion-item>
        <div class="error-message" *ngIf="isFieldInvalid('email')">
          <span *ngIf="loginForm.get('email')?.errors?.['required']">El correo es requerido</span>
          <span *ngIf="loginForm.get('email')?.errors?.['email']">Ingresa un correo válido</span>
        </div>

        <ion-item class="login-item">
          <ion-label position="stacked">Contraseña</ion-label>
          <ion-input 
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password" 
            placeholder="Ingresa tu contraseña"
            [class.error]="isFieldInvalid('password')">
            <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
            <ion-button 
              fill="clear" 
              slot="end" 
              (click)="togglePassword()"
              class="password-toggle">
              <ion-icon [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
            </ion-button>
          </ion-input>
        </ion-item>
        <div class="error-message" *ngIf="isFieldInvalid('password')">
          La contraseña es requerida
        </div>

        <div class="error-message" *ngIf="loginError">
          {{loginError}}
        </div>

        <ion-button 
          expand="block" 
          type="submit" 
          [disabled]="loginForm.invalid || isLoggingIn"
          class="login-button">
          <ion-icon name="log-in-outline" slot="start"></ion-icon>
          <span *ngIf="!isLoggingIn">Iniciar Sesión</span>
          <span *ngIf="isLoggingIn">Iniciando...</span>
        </ion-button>

        <div class="demo-credentials">
          <h3>Credenciales de Demostración:</h3>
          <div class="demo-user" (click)="fillDemoCredentials('admin')">
            <strong>Administrador:</strong> maria@utzac.edu.mx / 123456
          </div>
          <div class="demo-user" (click)="fillDemoCredentials('responsable')">
            <strong>Responsable:</strong> juan@utzac.edu.mx / 123456
          </div>
        </div>
      </form>
    </div>

    <div class="public-access">
      <ion-button 
        fill="outline" 
        expand="block" 
        (click)="goToPublicForm()"
        class="public-button">
        <ion-icon name="person-add-outline" slot="start"></ion-icon>
        Registro Público de Aspirantes
      </ion-button>
    </div>
  </div>
</ion-content>